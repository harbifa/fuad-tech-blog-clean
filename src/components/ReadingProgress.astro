---
---

<div id="reading-progress" class="fixed top-0 left-0 w-full h-1 bg-gray-200 dark:bg-gray-700 z-50">
  <div id="progress-bar" class="h-full bg-gradient-to-r from-primary-600 to-secondary-600 transition-all duration-300 ease-out" style="width: 0%"></div>
</div>

<script>
  // Reading progress indicator
  document.addEventListener('DOMContentLoaded', function() {
    const progressBar = document.getElementById('progress-bar');
    const article = document.querySelector('article');
    
    if (!progressBar || !article) return;
    
    function updateProgress() {
      const articleTop = article.offsetTop;
      const articleHeight = article.offsetHeight;
      const windowHeight = window.innerHeight;
      const scrollTop = window.pageYOffset;
      
      const articleBottom = articleTop + articleHeight;
      const windowBottom = scrollTop + windowHeight;
      
      let progress = 0;
      
      if (scrollTop >= articleTop) {
        if (windowBottom >= articleBottom) {
          progress = 100;
        } else {
          const visibleHeight = windowBottom - articleTop;
          progress = (visibleHeight / articleHeight) * 100;
        }
      }
      
      progress = Math.min(100, Math.max(0, progress));
      progressBar.style.width = progress + '%';
    }
    
    // Throttled scroll handler
    let ticking = false;
    function handleScroll() {
      if (!ticking) {
        requestAnimationFrame(() => {
          updateProgress();
          ticking = false;
        });
        ticking = true;
      }
    }
    
    window.addEventListener('scroll', handleScroll);
    updateProgress(); // Initial call
  });
</script>